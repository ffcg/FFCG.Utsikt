(function(n){function s(t){return(t.position=="top"||t.position=="bottom")&&(t.zposition=="back"||t.zposition=="next")&&(n[f].deprecated('Using position "'+t.position+'" in combination with zposition "'+t.zposition+'"','zposition "front"'),t.zposition="front"),t}function h(n){return typeof n.pageSelector!="string"&&(n.pageSelector="> "+n.pageNodetype),n}function c(){o=!0;r=n[f]._c;e=n[f]._d;u=n[f]._e;r.add("offcanvas modal background opening blocker page");e.add("style");u.add("opening opened closing closed setPage");i=n[f].glbl;i.$allMenus=(i.$allMenus||n()).add(this.$menu);i.$wndw.on(u.keydown,function(n){if(i.$html.hasClass(r.opened)&&n.keyCode==9)return n.preventDefault(),!1});var t=0;i.$wndw.on(u.resize,function(n,u){if(u||i.$html.hasClass(r.opened)){var f=i.$wndw.height();(u||f!=t)&&(t=f,i.$page.css("minHeight",f))}})}var f="mmenu",t="offCanvas",r,e,u,i,o;n[f].prototype["_init_"+t]=function(){if(this.opts[t]&&!this.vars[t+"_added"]){this.vars[t+"_added"]=!0;o||c();this.opts[t]=s(this.opts[t]);this.conf[t]=h(this.conf[t]);var n=this.opts[t],f=this.conf[t],u=[r.offcanvas];typeof this.vars.opened!="boolean"&&(this.vars.opened=!1);n.position!="left"&&u.push(r.mm(n.position));n.zposition!="back"&&u.push(r.mm(n.zposition));this.$menu.addClass(u.join(" ")).parent().removeClass(r.wrapper);this[t+"_initPage"](i.$page);this[t+"_initBlocker"]();this[t+"_initOpenClose"]();this[t+"_bindCustomEvents"]();this.$menu[f.menuInjectMethod+"To"](f.menuWrapperSelector)}};n[f].addons.push(t);n[f].defaults[t]={position:"left",zposition:"back",modal:!1,moveBackground:!0};n[f].configuration[t]={pageNodetype:"div",pageSelector:null,menuWrapperSelector:"body",menuInjectMethod:"prepend"};n[f].prototype.open=function(){if(this.vars.opened)return!1;var n=this;return this._openSetup(),setTimeout(function(){n._openFinish()},this.conf.openingInterval),"open"};n[f].prototype._openSetup=function(){i.$allMenus.not(this.$menu).trigger(u.close);i.$page.data(e.style,i.$page.attr("style")||"");i.$wndw.trigger(u.resize,[!0]);var n=[r.opened];this.opts[t].modal&&n.push(r.modal);this.opts[t].moveBackground&&n.push(r.background);this.opts[t].position!="left"&&n.push(r.mm(this.opts[t].position));this.opts[t].zposition!="back"&&n.push(r.mm(this.opts[t].zposition));this.opts.classes&&n.push(this.opts.classes);i.$html.addClass(n.join(" "));this.vars.opened=!0;this.$menu.addClass(r.current+" "+r.opened)};n[f].prototype._openFinish=function(){var n=this;this.__transitionend(i.$page,function(){n.$menu.trigger(u.opened)},this.conf.transitionDuration);i.$html.addClass(r.opening);this.$menu.trigger(u.opening)};n[f].prototype.close=function(){if(!this.vars.opened)return!1;var n=this;return this.__transitionend(i.$page,function(){n.$menu.removeClass(r.current).removeClass(r.opened);i.$html.removeClass(r.opened).removeClass(r.modal).removeClass(r.background).removeClass(r.mm(n.opts[t].position)).removeClass(r.mm(n.opts[t].zposition));n.opts.classes&&i.$html.removeClass(n.opts.classes);i.$page.attr("style",i.$page.data(e.style));n.vars.opened=!1;n.$menu.trigger(u.closed)},this.conf.transitionDuration),i.$html.removeClass(r.opening),this.$menu.trigger(u.closing),"close"};n[f].prototype[t+"_initBlocker"]=function(){var t=this;i.$blck||(i.$blck=n('<div id="'+r.blocker+'" />').appendTo(i.$body));i.$blck.off(u.touchstart).on(u.touchstart,function(n){n.preventDefault();n.stopPropagation();i.$blck.trigger(u.mousedown)}).on(u.mousedown,function(n){n.preventDefault();i.$html.hasClass(r.modal)||t.close()})};n[f].prototype[t+"_initPage"]=function(u){u||(u=n(this.conf[t].pageSelector,i.$body),u.length>1&&(n[f].debug("Multiple nodes found for the page-node, all nodes are wrapped in one <"+this.conf[t].pageNodetype+">."),u=u.wrapAll("<"+this.conf[t].pageNodetype+" />").parent()));u.addClass(r.page);i.$page=u};n[f].prototype[t+"_initOpenClose"]=function(){var f=this,t=this.$menu.attr("id");if(t&&t.length){this.conf.clone&&(t=r.umm(t));n('a[href="#'+t+'"]').off(u.click).on(u.click,function(n){n.preventDefault();f.open()})}if(t=i.$page.attr("id"),t&&t.length)n('a[href="#'+t+'"]').on(u.click,function(n){n.preventDefault();f.close()})};n[f].prototype[t+"_bindCustomEvents"]=function(){var n=this,i=u.open+" "+u.opening+" "+u.opened+" "+u.close+" "+u.closing+" "+u.closed+" "+u.setPage;this.$menu.off(i).on(i,function(n){n.stopPropagation()});this.$menu.on(u.open,function(){n.open()}).on(u.close,function(){n.close()}).on(u.setPage,function(i,r){n[t+"_initPage"](r);n[t+"_initOpenClose"]()})};o=!1})(jQuery);