(function(n){function o(n){switch(n){case 9:case 16:case 17:case 18:case 37:case 38:case 39:case 40:return!0}return!1}function s(t){return typeof t=="boolean"&&(t={add:t,search:t}),typeof t!="object"&&(t={}),t=n.extend(!0,{},n[u].defaults[r],t),typeof t.showLinksOnly!="boolean"&&(t.showLinksOnly=t.addTo=="menu"),t}function h(n){return n}function c(){f=!0;t=n[u]._c;e=n[u]._d;i=n[u]._e;t.add("search hassearch noresultsmsg noresults nosubresults");i.add("search reset change");l=n[u].glbl}var u="mmenu",r="searchfield",t,e,i,l,f;n[u].prototype["_init_"+r]=function(u){var p,v,y;f||c();p=this.vars[r+"_added"];this.vars[r+"_added"]=!0;p||(this.opts[r]=s(this.opts[r]),this.conf[r]=h(this.conf[r]));var a=this,l=this.opts[r],w=this.conf[r];if(l.add){switch(l.addTo){case"menu":v=this.$menu;break;case"panels":v=u;break;default:v=n(l.addTo,this.$menu).filter("."+t.panel)}v.length&&v.each(function(){var i=n(this),r=i.is("."+t.list)?"li":"div",u,f;i.children(r+"."+t.search).length||(i.is("."+t.menu)?(u=a.$menu,f="prependTo"):(u=i.children().first(),f=u.is("."+t.subtitle)?"insertAfter":"insertBefore"),n("<"+r+' class="'+t.search+'" />').append('<input placeholder="'+l.placeholder+'" type="text" autocomplete="off" />')[f](u));l.noResults&&(i.is("."+t.menu)&&(i=i.children("."+t.panel).first()),r=i.is("."+t.list)?"li":"div",i.children(r+"."+t.noresultsmsg).length||n("<"+r+' class="'+t.noresultsmsg+'" />').html(l.noResults).appendTo(i))})}this.$menu.children("div."+t.search).length&&this.$menu.addClass(t.hassearch);l.search&&(y=n("."+t.search,this.$menu),y.length&&y.each(function(){var r=n(this),u,f;l.addTo=="menu"?(u=n("."+t.panel,a.$menu),f=a.$menu):(u=r.closest("."+t.panel),f=u);var s=r.children("input"),c=a.__findAddBack(u,"."+t.list).children("li"),y=c.filter("."+t.label),h=c.not("."+t.subtitle).not("."+t.label).not("."+t.search).not("."+t.noresultsmsg),v="> a";l.showLinksOnly||(v+=", > span");s.off(i.keyup+" "+i.change).on(i.keyup,function(n){o(n.keyCode)||r.trigger(i.search)}).on(i.change,function(){r.trigger(i.search)});r.off(i.reset+" "+i.search).on(i.reset+" "+i.search,function(n){n.stopPropagation()}).on(i.reset,function(){r.trigger(i.search,[""])}).on(i.search,function(r,o){typeof o=="string"?s.val(o):o=s.val();o=o.toLowerCase();u.scrollTop(0);h.add(y).addClass(t.hidden);h.each(function(){var i=n(this);n(v,i).text().toLowerCase().indexOf(o)>-1&&i.add(i.prevAll("."+t.label).first()).removeClass(t.hidden)});n(u.get().reverse()).each(function(r){var u=n(this),f=u.data(e.parent),o;f&&(o=u.add(u.find("> ."+t.list)).find("> li").not("."+t.subtitle).not("."+t.search).not("."+t.noresultsmsg).not("."+t.label).not("."+t.hidden),o.length?f.removeClass(t.hidden).removeClass(t.nosubresults).prevAll("."+t.label).first().removeClass(t.hidden):l.addTo=="menu"&&(u.hasClass(t.opened)&&setTimeout(function(){f.trigger(i.open)},(r+1)*a.conf.openingInterval*1.5),f.addClass(t.nosubresults)))});f[h.not("."+t.hidden).length?"removeClass":"addClass"](t.noresults);a._update()})}))};n[u].addons.push(r);n[u].defaults[r]={add:!1,addTo:"menu",search:!1,placeholder:"Search",noResults:"No results found."};f=!1})(jQuery);